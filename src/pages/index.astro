---
import { getCollection } from "astro:content";
import { name, openGraph } from "spectre:globals";
import ProfilePicture from "../assets/yuriy_openai_rect.png";
import ActionButton from "../components/ActionButton.astro";
import Button from "../components/Button.astro";
import Card from "../components/Card.astro";
import ExternalLink from "../components/ExternalLink.astro";
import Icon from "../components/Icon.astro";
import ContentCard from "../components/ContentCard.astro";
import ImageGlow from "../components/ImageGlow.astro";
import Layout from "../layouts/Layout.astro";

const [posts, projects, quickInfo, industries, socials] = await Promise.all([
  getCollection("posts", (post) => post.data.draft !== true),
  getCollection("projects"),
  getCollection("quickInfo"),
  getCollection("industries"),
  getCollection("socials"),
]);
---

<Layout
	title={openGraph.home.title || name}
	description={openGraph.home.description}
	pagefindIgnore
>
	<!-- Hero Section with New Copy and Layout -->
	<div class="w-full mb-8" slot="hero">
		<Card class="relative overflow-hidden bg-gradient-to-br from-primary/10 via-background to-accent/10">
			<div class="absolute inset-0 bg-gradient-to-r from-primary/5 to-transparent opacity-50"></div>
			<div class="relative flex flex-col lg:flex-row lg:items-center gap-8 lg:gap-12 p-8">
				<!-- Left Column: Content (~55%) -->
				<div class="flex-1 lg:max-w-[55%] text-center lg:text-left">
					<h1 class="text-4xl lg:text-5xl font-bold leading-tight mb-4">
						What if your team had an extra 20 hours per week?
					</h1>
					<div class="text-lg lg:text-xl text-muted-foreground mb-6 leading-relaxed">
						<p class="mb-2">I'm <span class="font-bold leading-tight">Yuriy Babyak</span>. I automate the boring stuff
							so your team can focus on what matters.</p>
					</div>

					<!-- Quick Facts Badges -->
					<div class="flex flex-wrap gap-3 justify-center lg:justify-start mb-6">
						{quickInfo.map((info) => (
							<div class="inline-flex items-center gap-2 px-4 py-2.5 rounded-full bg-gradient-to-r from-background/80 via-card/60 to-background/80 backdrop-blur-sm shadow-sm">
								<Icon type={info.data.icon.type} name={info.data.icon.name as any} width={14} height={14} class='text-primary' />
								<span class="text-sm font-medium text-foreground">{info.data.text}</span>
							</div>
						))}
					</div>

					<!-- CTA Row -->
					<div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start mb-3">
						<a href="#hire" class="group inline-flex items-center justify-center gap-2 px-6 py-3 bg-primary text-primary-foreground rounded-lg font-semibold transition-all duration-300 hover:bg-primary/90 hover:shadow-lg hover:shadow-primary/25 hover:-translate-y-0.5">
							<Icon type="lucide" name="calendar" width={20} height={20} />
							Talk with me
						</a>
						<a href="/work" class="group inline-flex items-center justify-center gap-2 px-6 py-3 border border-border rounded-lg font-semibold transition-all duration-300 hover:bg-accent hover:shadow-lg hover:-translate-y-0.5">
							<Icon type="lucide" name="briefcase" width={20} height={20} />
							See case studies
						</a>
					</div>

					<!-- Helper Text -->
					<p class="text-sm text-muted-foreground/80 mb-6 text-center lg:text-left">
						Free, 30-min call. We'll map 1-3 quick wins for your team
					</p>

					<!-- Trust Row -->
					 <div class="flex flex-col gap-2">
						<p class="text-sm text-muted-foreground/80 text-center lg:text-left">
							Worked with:
						</p>
						<div class="flex flex-wrap gap-2 justify-center lg:justify-start">
							{industries.map((industry) => (
								<span class="px-3 py-1 text-xs font-medium bg-accent/20 text-accent-foreground rounded-full">{industry.data.text}</span>
							))}
						</div>
					</div>
				</div>

				<!-- Right Column: Photo (~45%) -->
				<div class="flex-shrink-0 lg:flex-1 lg:max-w-[45%] flex justify-center items-center order-first lg:order-last mb-8 lg:mb-0">
					<ImageGlow quality={100} width={300} src={ProfilePicture} alt="Yuriy Babyak profile picture" loading='eager' class="rounded-xl object-cover shadow-xl" />
				</div>
			</div>
		</Card>
	</div>

	<div class="h-full relative" slot="left">
		<Card class="min-w-0 sticky top-8">
			<div class="flex flex-row items-center justify-between mb-6">
				<div class="flex items-center gap-4">
					<Icon type='lucide' name="message-circle" width={24} height={24} class='text-primary' />
					<h3 class="m-0">Let's Connect</h3>
				</div>
			</div>
			<div class="grid grid-cols-1 gap-3">
				{socials.map((item) => (
					<a href={item.data.link} target="_blank" rel="noopener noreferrer" class="group flex items-center gap-4 p-4 rounded-lg border border-border/30 bg-card/50 text-foreground no-underline transition-all duration-300 hover:shadow-md hover:shadow-primary/10 hover:-translate-y-0.5 hover:border-primary/30 hover:bg-card/80 backdrop-blur-sm">
						<Icon type={item.data.icon.type} name={item.data.icon.name as any} width={20} height={20} class='text-primary group-hover:scale-110 transition-transform duration-300' />
						<span class="font-medium">{item.data.text}</span>
						<Icon type="lucide" name="external-link" width={14} height={14} class="ml-auto text-muted-foreground group-hover:text-primary transition-colors duration-300" />
					</a>
				))}
			</div>
		</Card>
	</div>

	<div class="flex flex-col w-full gap-8 sm:gap-4" slot="right">
		<Card>
			<div class="flex flex-row items-center gap-4 mb-6">
				<Icon type='lucide' name="user" width={24} height={24} class='text-primary' />
				<h2 class="m-0 leading-none">Overview</h2>
			</div>
			<div class="space-y-4">
				<p class="text-muted-foreground leading-relaxed">
					I'm an AI Engineer and startup founder specializing in LLM integration, business process automation, and AI-powered solutions. Currently building Waypass.ai, an AI-first startup that simplifies immigration processes in Poland. I help businesses implement cutting-edge AI solutions while building my own AI ventures.
				</p>
				<ActionButton href="/about" variant="secondary">
					Learn more about my expertise
				</ActionButton>
			</div>
		</Card>

		<Card>
			<div class="flex flex-row items-center gap-4 mb-6">
				<Icon type='lucide' name="target" width={24} height={24} class='text-primary' />
				<h2 class="m-0 leading-none">Areas of Expertise</h2>
			</div>
			<div class="grid grid-cols-1 gap-4">
				<div class="p-4 rounded-lg bg-accent/10 border border-accent/20">
					<div class="flex items-center gap-3 mb-2">
						<Icon type="lucide" name="brain" width={20} height={20} class="text-primary" />
						<h3 class="text-base m-0">LLM-Powered Applications</h3>
					</div>
					<p class="text-sm text-muted-foreground m-0">Building complete LLM-powered applications from frontend to infrastructure with strong business intuition and technical expertise.</p>
				</div>
				<div class="p-4 rounded-lg bg-accent/10 border border-accent/20">
					<div class="flex items-center gap-3 mb-2">
						<Icon type="lucide" name="cog" width={20} height={20} class="text-primary" />
						<h3 class="text-base m-0">Business Process Automation</h3>
					</div>
					<p class="text-sm text-muted-foreground m-0">Automating boring and lengthy business processes including customer support, email workflows, lead qualification, document/image processing, and repetitive manual tasks.</p>
				</div>
				<div class="p-4 rounded-lg bg-accent/10 border border-accent/20">
					<div class="flex items-center gap-3 mb-2">
						<Icon type="lucide" name="graduation-cap" width={20} height={20} class="text-primary" />
						<h3 class="text-base m-0">Vibe-Coding Workshops</h3>
					</div>
					<p class="text-sm text-muted-foreground m-0">Teaching developers how to "Vibe-code" with AI/LLM assistance, achieving 10x development speed and massive productivity boosts.</p>
				</div>
				<div class="p-4 rounded-lg bg-accent/10 border border-accent/20">
					<div class="flex items-center gap-3 mb-2">
						<Icon type="lucide" name="globe" width={20} height={20} class="text-primary" />
						<h3 class="text-base m-0">Immigration Tech Solutions</h3>
					</div>
					<p class="text-sm text-muted-foreground m-0">Building <ExternalLink href="https://waypass.ai">Waypass.ai</ExternalLink> with deep image analysis, AI client data collection, browser automation, document analysis - inspiring businesses with cutting-edge immigration tech.</p>
				</div>
			</div>
		</Card>

		<Card>
			<div class="flex flex-row items-center gap-4 mb-6">
				<Icon type='lucide' name="trending-up" width={24} height={24} class='text-primary' />
				<h2 class="m-0 leading-none">Latest Insights</h2>
			</div>
			<div class="flex flex-col gap-4">
				{posts.sort((a, b) => b.data.createdAt.getTime() - a.data.createdAt.getTime()).slice(0, 2).map((post) => (
					<ContentCard
						href={`/blog/${post.id}`}
						title={post.data.title}
						description={post.data.description}
						metadata={post.data.createdAt.toLocaleDateString()}
					/>
				))}
			</div>
			<div class="mt-4">
				<ActionButton href="/blog" variant="secondary">
					Read all articles
				</ActionButton>
			</div>
		</Card>

		<Card>
			<div class="flex flex-row items-center gap-4 mb-6">
				<Icon type='lucide' name="rocket" width={24} height={24} class='text-primary' />
				<h2 class="m-0 leading-none">Featured Work</h2>
			</div>
			<div class="flex flex-col gap-4">
				{projects.sort((a, b) => (a.data.order ?? 999) - (b.data.order ?? 999) || a.data.title.localeCompare(b.data.title)).slice(0, 2).map((project) => (
					<ContentCard
						href={`/work/${project.id}`}
						title={project.data.title}
						description={project.data.description}
					/>
				))}
			</div>
			<div class="mt-4">
				<ActionButton href="/work" variant="secondary">
					View all projects
				</ActionButton>
			</div>
		</Card>

		<Card id="hire">
			<div class="flex flex-row items-center gap-4 mb-6">
				<Icon type='lucide' name="handshake" width={24} height={24} class='text-primary' />
				<h2 class="m-0 leading-none">Let's Work Together</h2>
			</div>
			<div class="space-y-4">
				<p class="text-muted-foreground">
					Ready to transform your business with AI?
				</p>
				<div class="flex flex-col sm:flex-row gap-3">
					<Button href="https://cal.com/yuriybabyak" target="_blank" rel="noopener noreferrer" variant="default" iconName="calendar">
						Book call
					</Button>
					<Button href="mailto:yuriy.babyak@gmail.com" variant="secondary" iconName="mail">
						Email me
					</Button>
				</div>
			</div>
		</Card>
	</div>
</Layout>
